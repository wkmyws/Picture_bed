<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<center>
    <br><br><br><br><br><br>
    <input id="f" type="file"></input>
    <br><br>
    口令：<input id="pwd"></input>
    <br><br>
    <button onclick="run()">upload</button>
    <div id="ret">
        <hr>
        <font color="red" id="u"></font><hr>
        <img id="i" alt="这里将显示上传成功的图片"></img>
    </div>
</center>

<script>
    var config = {
        headers: { 'Content-Type': 'multipart/form-data' }
    }
    function run() {
        if (f.files.length == 0) {
            alert("请选择图片")
            return
        }
        var param = new FormData()
        param.append('file', f.files[0])
        param.append('pwd', pwd.value || null)
        u.innerHTML="正在上传"
        axios.post('/api/upload', param, config)
            .then((res) => {
                u.innerHTML=i.src=res.data
            })
            .catch((err) => {
                alert("上传错误：" + err)
            })
    }
</script>